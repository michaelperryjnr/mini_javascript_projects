<!DOCTYPE html>
<html lang="en" class="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BBF LABS Quizzes Upload</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style type="text/tailwindcss">
    @layer base {
      :root {
        --color-primary: 22 163 74;
        --color-secondary: 234 179 8;
        --color-accent: 124 58 237;
        --color-background: 255 255 255;
        --color-foreground: 17 24 39;
      }
      .dark {
        --color-primary: 34 197 94;
        --color-secondary: 252 211 77;
        --color-accent: 167 139 250;
        --color-background: 140 140 140;
        --color-foreground: 243 244 246;
      }
    }
    @layer utilities {
      .transition-all {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
      }
      
      .bg-pattern-light {
        background-image: radial-gradient(circle at 1px 1px, rgb(var(--color-primary) / 0.1) 1px, transparent 0);
        background-size: 20px 20px;
      }
      
      .dark .bg-pattern-light {
        background-image: radial-gradient(circle at 1px 1px, rgb(var(--color-primary) / 0.2) 1px, transparent 0);
      }
    }

    .toast-container {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 50;
    }

    .toast {
      background-color: rgb(var(--color-background));
      color: rgb(var(--color-foreground));
      padding: 0.75rem 1rem;
      border-radius: 0.375rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      margin-bottom: 0.75rem;
      transition: all 0.3s ease-in-out;
      opacity: 0;
      transform: translateY(-1rem);
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    .toast.success {
      background-color: rgb(var(--color-primary));
      color: white;
    }

    .toast.error {
      background-color: rgb(220 38 38);
      color: white;
    }
  </style>
</head>

<body
  class="min-h-screen bg-gradient-to-br from-green-50 to-yellow-50 dark:from-gray-900 dark:to-gray-800 bg-pattern-light transition-all duration-300">
  <!-- Theme Toggle -->
  <button id="theme-toggle"
    class="fixed top-4 right-4 p-2 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-500 dark:text-violet-400" fill="none"
      viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
    </svg>
  </button>

  <!-- Profile Section -->
  <div id="profile-section"
    class="hidden fixed top-4 left-4 flex items-center space-x-3 bg-white dark:bg-gray-800 p-3 rounded-full shadow-lg">
    <div id="profile-avatar"
      class="w-10 h-10 rounded-full bg-gradient-to-r from-green-400 to-blue-500 flex items-center justify-center text-white font-bold">
    </div>
    <div>
      <p id="profile-name" class="font-semibold text-gray-800 dark:text-gray-200 text-sm"></p>
      <p id="profile-email" class="text-gray-500 dark:text-gray-400 text-xs"></p>
    </div>
  </div>

  <!-- Main Container -->
  <div class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="w-full max-w-md">
      <!-- Logo/Title -->
      <h1
        class="text-4xl font-bold text-center mb-8 bg-gradient-to-r from-green-600 via-[#434e52] to-[#ecce6d] bg-clip-text text-transparent flex flex-row items-center justify-center space-x-2">
        <img src="../../assets/images/bbf-logo.svg" class="w-[8rem]" />
      </h1>

      <!-- Main Content Container -->
      <div id="app" class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 transition-all duration-300">
        <!-- Dynamic content will be rendered here -->
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>

  <script>
    const r = document.getElementById("app"); const c = "https://api.theniitettey.live/api/v1"; let u = []; const t = document.documentElement; const o = document.getElementById("theme-toggle"); if (localStorage.t === "dark" || !("t" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches) { t.classList.add("dark") } o.addEventListener("click", () => { t.classList.toggle("dark"); localStorage.t = t.classList.contains("dark") ? "dark" : "light"; e() }); function e() { const e = t.classList.contains("dark"); o.innerHTML = e ? '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-violet-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>' : '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>' } e(); async function a() { try { const t = await fetch(`${c}/user/profile`, { headers: { o: `Bearer ${localStorage.getItem("accessToken")}` } }); if (t.ok) { const r = await t.json(); document.getElementById("profile-section").classList.remove("hidden"); document.getElementById("profile-name").textContent = r.user.name; document.getElementById("profile-email").textContent = r.user.email; document.getElementById("profile-avatar").textContent = r.user.name.charAt(0).toUpperCase() } } catch (e) { console.error("Error fetching profile:", e) } } async function l() { try { const t = await fetch(`${c}/courses`, { headers: { o: `Bearer ${localStorage.getItem("accessToken")}` } }); if (t.ok) { const r = await t.json(); u = r.courses } } catch (e) { console.error("Error fetching courses:", e) } } function s() {
      document.getElementById("profile-section").classList.add("hidden"); r.innerHTML = `
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">Login</h2>
        <form id="login-form" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Username</label>
            <input type="text" id="username" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white"
              placeholder="Enter your username">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password</label>
            <input type="password" id="password" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white"
              placeholder="Enter your password">
          </div>
          <button type="submit"
            class="w-full py-2 px-4 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-medium rounded-lg transition-colors">
            Login
          </button>
        </form>
        <p class="mt-4 text-center text-gray-600 dark:text-gray-400">
          Don't have an account? 
          <a href="#" class="text-green-600 hover:text-green-500 font-medium" id="to-register">Register</a>
        </p>
      `; document.getElementById("to-register").addEventListener("click", i); document.getElementById("login-form").addEventListener("submit", f)
    } function i() {
      r.innerHTML = `
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">Register</h2>
        <form id="register-form" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Name</label>
            <input type="text" id="name" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white"
              placeholder="Enter your full name">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Username</label>
            <input type="text" id="username" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white"
              placeholder="Choose a username">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
            <input type="email" id="email" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white"
              placeholder="Enter your email">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password</label>
            <input type="password" id="password" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white"
              placeholder="Choose a password">
          </div>
          <button type="submit"
            class="w-full py-2 px-4 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-medium rounded-lg transition-colors">
            Register
          </button>
        </form>
        <p class="mt-4 text-center text-gray-600 dark:text-gray-400">
          Already have an account? 
          <a href="#" class="text-green-600 hover:text-green-500 font-medium" id="to-login">Login</a>
        </p>
      `; document.getElementById("to-login").addEventListener("click", s); document.getElementById("register-form").addEventListener("submit", p)
    } function g() {
      a(); l(); r.innerHTML = `
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">Choose Upload Type</h2>
        <div class="space-y-4">
          <button id="file-upload-btn"
            class="w-full py-2 px-4 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-medium rounded-lg transition-colors">
            Upload File
          </button>
          <button id="link-upload-btn"
            class="w-full py-2 px-4 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-medium rounded-lg transition-colors">
            Upload Link
          </button>
        </div>
        <div class="mt-4 text-center">
          <a href="#" id="contact-admin" class="text-violet-600 hover:text-violet-500 font-medium">Can't find your course? Contact admin</a>
        </div>
        <div class="mt-4 flex justify-between text-sm">
          <a href="#" class="text-green-600 hover:text-green-500 font-medium" id="to-payment">Go to Payment</a>
          <a href="#" class="text-red-600 hover:text-red-500 font-medium" id="to-logout">Logout</a>
        </div>
      `; document.getElementById("file-upload-btn").addEventListener("click", () => n("file")); document.getElementById("link-upload-btn").addEventListener("click", () => n("link")); document.getElementById("contact-admin").addEventListener("click", d); document.getElementById("to-payment").addEventListener("click", y); document.getElementById("to-logout").addEventListener("click", b)
    } function n(t) {
      const e = t === "file"; r.innerHTML = `
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">Upload ${e ? "File" : "Link"}</h2>
        <form id="upload-form" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Course</label>
            <select id="courseId" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white">
              <option value="">Select a course</option>
              ${u.map(e => `<option value="${e._id}">${e.code}</option>`).join("")}
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
            <input type="text" id="title" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white"
              placeholder="Enter material title">
          </div>
          ${e ? `
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File</label>
              <input type="file" id="file" required
                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100 dark:file:bg-gray-700 dark:file:text-gray-200">
            </div>
          `: `
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Link</label>
              <input type="url" id="link" required
                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white"
                placeholder="Enter material link">
            </div>
          `}
          <button type="submit"
            class="w-full py-2 px-4 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-medium rounded-lg transition-colors">
            Upload
          </button>
        </form>
        <div class="mt-4 flex justify-between text-sm">
          <a href="#" class="text-green-600 hover:text-green-500 font-medium" id="back-to-choice">Back to Upload Choice</a>
          <a href="#" class="text-red-600 hover:text-red-500 font-medium" id="to-logout">Logout</a>
        </div>
      `; document.getElementById("back-to-choice").addEventListener("click", g); document.getElementById("to-logout").addEventListener("click", b); document.getElementById("upload-form").addEventListener("submit", e => m(e, t))
    } function d() { x("Contacting admin at admin@theniitettey.live", "success"); window.location.href = "https://wa.me/?text=Hi%20Admin%20%40%20BBF%20Labs%2C%0A%0AI%20hope%20you%27re%20doing%20well.%20I%20am%20currently%20trying%20to%20access%20my%20course%20on%20the%20platform%2C%20but%20it%20seems%20that%20my%20course%20isn%27t%20listed%20or%20available.%20Could%20you%20please%20assist%20in%20adding%20it%20or%20provide%20guidance%20on%20how%20to%20proceed%3F%0A%0AThank%20you%20for%20your%20help%21%0A%0ABest%20regards%2C%0A%5BYour%20Name%5D" } async function m(e, t) { e.preventDefault(); const r = u.filter(e => e._id === document.getElementById("courseId").value)[0]._id; const o = document.getElementById("title").value; const a = new FormData; a.append("courseId", r); a.append("title", o); let l = { title: o, l: r }; if (t === "file") { const n = document.getElementById("file").files[0]; a.append("file", n) } else { const s = document.getElementById("link").value; l.link = s } try { let e; if (t === "file") { e = await fetch(`${c}/materials/upload`, { method: "POST", body: a, headers: { o: `Bearer ${localStorage.getItem("accessToken")}` } }) } else { const d = JSON.stringify(l); e = await fetch(`${c}/materials/li/upload`, { method: "POST", body: d, headers: { i: "application/json", o: `Bearer ${localStorage.getItem("accessToken")}` } }) } const d = await e.json(); if (e.ok) { x(`${t === "file" ? "File" : "Link"} uploaded successfully`, "success"); g() } else { x("Failed" + d.message || "Upload failed", "error") } } catch (i) { x(`Error uploading ${t}`, "error"); x(i.message, "error"); console.log(i.message) } } async function f(e) { e.preventDefault(); const t = document.getElementById("username").value.toLowerCase(); const r = document.getElementById("password").value; try { const a = await fetch(`${c}/auth/login`, { method: "POST", headers: { i: "application/json" }, body: JSON.stringify({ username: t, password: r }) }); const l = await a.json(); if (a.ok) { localStorage.setItem("accessToken", l.accessToken); x("Login successful", "success"); g() } else { x(l.message || "Login failed", "error") } } catch (o) { x("Error logging in", "error") } } async function p(e) { e.preventDefault(); const t = document.getElementById("name").value; const r = document.getElementById("username").value.toLowerCase(); const o = document.getElementById("email").value.toLowerCase(); const a = document.getElementById("password").value; try { const i = await fetch(`${c}/user/register`, { method: "POST", headers: { i: "application/json" }, body: JSON.stringify({ name: t, username: r, email: o, password: a }) }); const n = await i.json(); if (i.ok) { x("Registration successful", "success"); s() } else { x(n.message || "Registration failed", "error") } } catch (l) { x("Error registering", "error") } } function b() { localStorage.removeItem("accessToken"); x("Logged out successfully", "success"); s() } function y() { x("Watch this space", "error") } const h = document.getElementById("toast-container"); function x(e, t = "default", r = 3e3) { const o = document.createElement("div"); o.className = `toast ${t}`; o.textContent = e; h.appendChild(o); o.offsetHeight; o.classList.add("show"); setTimeout(() => { o.classList.remove("show"); setTimeout(() => { h.removeChild(o) }, 300) }, r) } s();
  </script>
</body>

</html>